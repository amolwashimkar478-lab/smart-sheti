<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рдкреАрдХ рд╕рд▓реНрд▓рд╛</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background: #f8f9fa; margin: 0; padding: 20px; }
        .advice-card { background: white; border-radius: 20px; padding: 25px; max-width: 500px; margin: auto; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; }
        .day-tag { background: #00b894; color: white; padding: 6px 18px; border-radius: 20px; font-weight: bold; display: inline-block; margin-bottom: 20px; }
        .advice-content { background: #e8f5e9; border: 1px solid #c8e6c9; padding: 20px; border-radius: 15px; color: #2e7d32; font-size: 18px; line-height: 1.6; text-align: left; }
        .back-btn { margin-top: 25px; background: #2d3436; color: white; border: none; padding: 14px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; }
    </style>
</head>
<body>

<div class="advice-card">
    <h2 id="cropTitle" style="color:#2d3436;">рд▓реЛрдб рд╣реЛрдд рдЖрд╣реЗ...</h2>
    <div class="day-tag" id="dayDisplay">рджрд┐рд╡рд╕ рдореЛрдЬрдд рдЖрд╣реЗ...</div>
    <div class="advice-content">
        <strong>ЁЯУв рдЖрдЬрдЪрд╛ рд╕рд▓реНрд▓рд╛:</strong><br>
        <span id="adviceText">рдХреГрдкрдпрд╛ рдереЛрдбрд╛ рд╡реЗрд│ рдерд╛рдВрдмрд╛...</span>
    </div>
    <button class="back-btn" onclick="location.href='myfarm.html'">ЁЯФЩ рдбреЕрд╢рдмреЛрд░реНрдбрд╡рд░ рдкрд░рдд рдЬрд╛</button>
</div>

<script>
    const rules = {
        "рдХрд╛рдкреВрд╕": { 30: "ЁЯМ▒ рдЦрддрд╛рдЪрд╛ рдкрд╣рд┐рд▓рд╛ рд╣рдкреНрддрд╛ рджреНрдпрд╛.", 50: "тЪая╕П рдмреЛрдВрдбрдЕрд│реАрд╕рд╛рдареА рдХрд╛рдордЧрдВрдз рд╕рд╛рдкрд│реЗ рд▓рд╛рд╡рд╛.", 90: "ЁЯМ╕ рдкрд╛рддреЗ рдЧрд│ рд░реЛрдЦрдгреНрдпрд╛рд╕рд╛рдареА рдлрд╡рд╛рд░рдгреА рдХрд░рд╛." },
        "рд╕реЛрдпрд╛рдмреАрди": { 20: "ЁЯМ┐ рдХреЛрд│рдкрдгреА рдХрд┐рдВрд╡рд╛ рдЦреБрд░рдкрдгреА рдХрд░реВрди рддрдг рдирд┐рдпрдВрддреНрд░рдг рдХрд░рд╛.", 45: "ЁЯМ╕ рдлреБрд▓рдзрд╛рд░рдгрд╛ рдЕрд╡рд╕реНрдерд╛: рдкрд╛рдгреА рджреНрдпрд╛.", 75: "ЁЯРЫ рд╢реЗрдВрдЧрд╛ рдкреЛрдЦрд░рдгрд╛рд░реА рдЕрд│реА рддрдкрд╛рд╕рд╛." },
        "рдЧрд╣реВ": { 21: "ЁЯТз рдкрд╣рд┐рд▓реЗ рдкрд╛рдгреА (CRIs) рджреНрдпрд╛.", 45: "ЁЯМ╛ рдирддреНрд░ рдЦрддрд╛рдЪрд╛ рджреБрд╕рд░рд╛ рд╣рдкреНрддрд╛ рджреНрдпрд╛.", 80: "ЁЯМ╛ рджрд╛рдгреЗ рднрд░рддрд╛рдирд╛ рдкрд╛рдгреА рдХрдореА рдкрдбреВ рджреЗрдК рдирдХрд╛." },
        "рд╣рд░рднрд░рд╛": { 30: "тЬВя╕П рдЬрд╛рд╕реНрдд рдлреБрдЯрд╡реЗ рдлреБрдЯрдгреНрдпрд╛рд╕рд╛рдареА рд╢реЗрдВрдбрд╛ рдЦреБрдбрд╛.", 60: "ЁЯРЫ рдШрд╛рдЯреЗ рдЕрд│реАрд╕рд╛рдареА рдлрд╡рд╛рд░рдгреА рдХрд░рд╛." },
        "рдХрд╛рдВрджрд╛": { 45: "ЁЯзЕ рдЦрдд рджреНрдпрд╛ рдЖрдгрд┐ рдЦреБрд░рдкрдгреА рдХрд░рд╛.", 90: "ЁЯМ┐ рдорд╛рди рдкрдбреВ рд▓рд╛рдЧрд▓реНрдпрд╛рд╡рд░ рдкрд╛рдгреА рдмрдВрдж рдХрд░рд╛." },
        "рд╣рд│рдж": { 90: "ЁЯЪЬ рдореЛрдареА рднрд░рдгреА (рдорд╛рддреА рдЪрдврд╡рдгреЗ) рдХрд░рд╛.", 150: "тЪая╕П рдХрд░рдкрд╛ рд░реЛрдЧрд╛рд╕рд╛рдареА рдмреБрд░рд╢реАрдирд╛рд╢рдХ рд╡рд╛рдкрд░рд╛." },
        "рдХрд▓рд┐рдВрдЧрдб": { 30: "ЁЯНЙ рдлрд│ рдлреБрдЧрд╡рдгреАрд╕рд╛рдареА рдЦрддреЗ рджреНрдпрд╛.", 65: "ЁЯНЙ рдХрд╛рдврдгреАрдЪреА рддрдпрд╛рд░реА рдХрд░рд╛." }
        // рдЕрдзрд┐рдХ рдкрд┐рдХрд╛рдВрдЪреЗ рд╕рд▓реНрд▓реЗ рдпреЗрдереЗ рдпрд╛рдЪ рдкрджреНрдзрддреАрдиреЗ рд╡рд╛рдврд╡реВ рд╢рдХрддрд╛...
    };

    function loadAdvice() {
        const params = new URLSearchParams(window.location.search);
        const crop = params.get('crop');
        const date = params.get('date');

        if(crop && date) {
            document.getElementById('cropTitle').innerText = "ЁЯМ╛ " + crop;
            const diff = Math.floor((new Date() - new Date(date)) / 86400000);
            document.getElementById('dayDisplay').innerText = "рд▓рд╛рдЧрд╡рдбреАрдЪрд╛ " + (diff < 0 ? 0 : diff) + " рд╡рд╛ рджрд┐рд╡рд╕";

            let msg = "рдкрд┐рдХрд╛рдЪреЗ рдирд┐рдпрдорд┐рдд рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рд╛ рдЖрдгрд┐ рдЖрд╡рд╢реНрдпрдХрддреЗрдиреБрд╕рд╛рд░ рдкрд╛рдгреА рджреНрдпрд╛.";
            if(rules[crop]) {
                let keys = Object.keys(rules[crop]).map(Number).sort((a,b)=>b-a);
                let best = keys.find(d => d <= diff);
                if(best) msg = rules[crop][best];
            }
            document.getElementById('adviceText').innerText = msg;

            // рдорд╣рддреНрддреНрд╡рд╛рдЪрд╛ рджрд┐рд╡рд╕ рдЕрд╕рд▓реНрдпрд╛рд╕ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди (Browser Only)
            if(rules[crop] && rules[crop][diff]) {
                if(Notification.permission === "granted") {
                    new Notification("рд╢реЗрддреА рд╕рд▓реНрд▓рд╛", {body: crop + ": " + rules[crop][diff]});
                }
            }
        }
    }
    window.onload = loadAdvice;
</script>
</body>
</html>
