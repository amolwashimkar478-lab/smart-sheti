<!DOCTYPE html>
<html lang="mr">
<head>
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
  window.OneSignal = window.OneSignal || [];
  OneSignal.push(function() {
    OneSignal.init({
      appId: "fdb7e40a-dc5c-4620-85d7-d99e5db6eb91",
      safari_web_id: "", // рдЬрд░ рдЕрд╕реЗрд▓ рддрд░ рдЯрд╛рдХрд╛, рдЕрдиреНрдпрдерд╛ рд░рд┐рдХрд╛рдореЗ рдареЗрд╡рд╛
      notifyButton: {
        enable: true, // рдЙрдЬрд╡реНрдпрд╛ рдХреЛрдкрд▒реНрдпрд╛рдд рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рдирдЪреА рдЫреЛрдЯреА рдШрдВрдЯрд╛ рджрд┐рд╕реЗрд▓
      },
      allowLocalhostAsSecureOrigin: true,
    });
    
    // рдпреБрдЬрд░рд▓рд╛ рд╕рдмрд╕реНрдХреНрд░рд╛рдИрдм рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд░реЙрдореНрдкреНрдЯ рджрд╛рдЦрд╡рдгреЗ
    OneSignal.showNativePrompt();
  });

  // рдкрд┐рдХрд╛рдЪрд╛ рд╕рд▓реНрд▓рд╛ рдкреБрд╢ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдлрдВрдХреНрд╢рди
  function sendOneSignalNotification(cropName, message) {
    OneSignal.push(function() {
      OneSignal.sendSelfNotification(
        "ЁЯМ╛ рд╢реЗрддреА рд╕рд▓реНрд▓рд╛: " + cropName,
        message,
        null,
        null,
        { "en": message }
      );
    });
  }
</script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рдорд╛рдЭрд╛ рд╢реЗрддреА рдбреЕрд╢рдмреЛрд░реНрдб</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00b894; --dark: #2d3436; --bg: #f4f7f6; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        .header { background: linear-gradient(135deg, #1e3799, #00b894); color: white; padding: 30px 20px; text-align: center; border-radius: 0 0 25px 25px; }
        .container { padding: 20px; max-width: 500px; margin: auto; }
        .add-card { background: white; border-radius: 15px; padding: 20px; margin-top: -20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .input-group { margin-bottom: 12px; }
        label { display: block; font-size: 14px; margin-bottom: 5px; font-weight: bold; color: #636e72; }
        select, input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; font-size: 16px; }
        .btn-add { background: var(--dark); color: white; border: none; width: 100%; padding: 14px; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .crop-card { background: white; border-radius: 15px; padding: 15px; margin-top: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-left: 6px solid var(--primary); }
        .crop-info h4 { margin: 0; color: var(--dark); }
        .btn-view { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 8px; font-size: 12px; font-weight: bold; cursor: pointer; }
        .delete-btn { color: #ff7675; cursor: pointer; font-weight: bold; margin-left: 10px; }
    </style>
</head>
<body>

<div class="header">
    <h2>ЁЯЪЬ рдорд╛рдЭреА рдбрд┐рдЬрд┐рдЯрд▓ рд╢реЗрддреА</h2>
    <p>рддреБрдордЪреА рдкрд┐рдХреЗ рдЬреЛрдбрд╛ рдЖрдгрд┐ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдХрд░рд╛</p>
</div>

<div class="container">
    <div class="add-card">
        <div class="input-group">
            <label>рд╣рдВрдЧрд╛рдо рдирд┐рд╡рдбрд╛</label>
            <select id="seasonSelect" onchange="updateCrops()">
                <option value="">-- рдирд┐рд╡рдбрд╛ --</option>
                <option value="Kharif">рдЦрд░реАрдк (рдкрд╛рд╡рд╕рд╛рд│реА)</option>
                <option value="Rabi">рд░рдмреНрдмреА (рд╣рд┐рд╡рд╛рд│реА)</option>
                <option value="Summer">рдЙрдиреНрд╣рд╛рд│реА</option>
                <option value="Fruit">рднрд╛рдЬреАрдкрд╛рд▓рд╛/рдирдЧрджреА</option>
            </select>
        </div>
        <div class="input-group">
            <label>рдкреАрдХ рдирд┐рд╡рдбрд╛</label>
            <select id="cropSelect"></select>
        </div>
        <div class="input-group">
            <label>рд▓рд╛рдЧрд╡рдб рддрд╛рд░реАрдЦ</label>
            <input type="date" id="pDate">
        </div>
        <button class="btn-add" onclick="addCrop()">рдбреЕрд╢рдмреЛрд░реНрдбрд╡рд░ рдЬреЛрдбрд╛</button>
    </div>

    <div id="displayArea" style="margin-top:20px;"></div>
</div>

<script>
    const cropData = {
        "Kharif": ["рдХрд╛рдкреВрд╕", "рд╕реЛрдпрд╛рдмреАрди", "рддреВрд░", "рднрд╛рдд", "рдордХрд╛", "рдореВрдЧ", "рдЙрдбреАрдж", "рдмрд╛рдЬрд░реА", "рдЬреНрд╡рд╛рд░реА", "рднреБрдИрдореВрдЧ", "рддреАрд│", "рд╕реВрд░реНрдпрдлреВрд▓"],
        "Rabi": ["рдЧрд╣реВ", "рд╣рд░рднрд░рд╛", "рдХрд╛рдВрджрд╛", "рд▓рд╕реВрдг", "рдмрдЯрд╛рдЯрд╛", "рдореЛрд╣рд░реА", "рдХрд░рдбрдИ", "рдЬреНрд╡рд╛рд░реА (рд░рдмреНрдмреА)", "рд╡рд╛рдЯрд╛рдгрд╛", "рдорд╕реВрд░"],
        "Summer": ["рдХрд▓рд┐рдВрдЧрдб", "рдЦрд░рдмреВрдЬ", "рдХрд╛рдХрдбреА", "рднреЗрдВрдбреА", "рдЧрд╡рд╛рд░", "рднреБрдИрдореВрдЧ (рдЙрдиреНрд╣рд╛рд│реА)", "рдореВрдЧ (рдЙрдиреНрд╣рд╛рд│реА)"],
        "Fruit": ["рд╣рд│рдж", "рдЖрд▓реЗ", "рдорд┐рд░рдЪреА", "рдЯреЛрдореЕрдЯреЛ", "рд╡рд╛рдВрдЧреА", "рдХреЛрдмреА", "рдлреНрд▓реЙрд╡рд░", "рд╢рд┐рдорд▓рд╛ рдорд┐рд░рдЪреА", "рджреВрдзрдзреБрдВрдж"]
    };

    function updateCrops() {
        const s = document.getElementById('seasonSelect').value;
        const c = document.getElementById('cropSelect');
        c.innerHTML = '';
        if(cropData[s]) cropData[s].forEach(p => c.add(new Option(p, p)));
    }

    function addCrop() {
        const crop = document.getElementById('cropSelect').value;
        const date = document.getElementById('pDate').value;
        if(!crop || !date) return alert("рдХреГрдкрдпрд╛ рд╕рд░реНрд╡ рдорд╛рд╣рд┐рддреА рднрд░рд╛!");

        let farm = JSON.parse(localStorage.getItem("farmList") || "[]");
        farm.push({ id: Date.now(), crop, date });
        localStorage.setItem("farmList", JSON.stringify(farm));
        render();
    }

    function render() {
        const farm = JSON.parse(localStorage.getItem("farmList") || "[]");
        const area = document.getElementById('displayArea');
        area.innerHTML = farm.length ? "" : "<p style='text-align:center; color:grey;'>рдЕрджреНрдпрд╛рдк рдХреЛрдгрддреЗрд╣реА рдкреАрдХ рдЬреЛрдбрд▓реЗрд▓реЗ рдирд╛рд╣реА.</p>";
        farm.forEach(item => {
            area.innerHTML += `
                <div class="crop-card">
                    <div class="crop-info">
                        <h4>ЁЯМ╛ ${item.crop}</h4>
                        <span style="font-size:12px; color:grey;">рддрд╛рд░реАрдЦ: ${item.date}</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <button class="btn-view" onclick="location.href='advice.html?crop=${item.crop}&date=${item.date}'">рдкрд╣рд╛</button>
                        <span class="delete-btn" onclick="remove(${item.id})">ЁЯЧСя╕П</span>
                    </div>
                </div>`;
        });
    }

    function remove(id) {
        if(confirm("рд╣реЗ рдкреАрдХ рдХрд╛рдвреВрди рдЯрд╛рдХрд╛рдпрдЪреЗ рдХрд╛?")) {
            let farm = JSON.parse(localStorage.getItem("farmList") || "[]").filter(i => i.id !== id);
            localStorage.setItem("farmList", JSON.stringify(farm));
            render();
        }
    }
    window.onload = render;
</script>
</body>
</html>
