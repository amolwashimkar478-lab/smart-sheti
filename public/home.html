<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Sheti - Home</title>
  
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "fdb7e40a-dc5c-4620-85d7-d99e5db6eb91",
      allowLocalhostAsSecureOrigin: true,
      slidedown: {
        prompts: [{
          type: "push",
          autoPrompt: true,
          text: {
            actionMessage: "рддреБрдореНрд╣рд╛рд▓рд╛ рд╢реЗрддреАрд╡рд┐рд╖рдпрдХ рд╕реВрдЪрдирд╛ рдЖрдгрд┐ рдкрд╛рд╡рд╕рд╛рдЪрд╛ рдЗрд╢рд╛рд░рд╛ рд╣рд╡рд╛ рдЖрд╣реЗ рдХрд╛?",
            acceptButton: "рд╣реЛ",
            cancelButton: "рдирдХреЛ"
          },
          delay: { pageViews: 1, timeDelay: 3 }
        }]
      }
    });
  });
</script>

<style>
:root {
  --bg-color: #e8f5e9;
  --header-bg: #ffffff;
  --text-color: #2e7d32;
}
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: var(--bg-color);
  margin: 0; padding: 20px;
}
.header {
  max-width: 400px; margin: 0 auto 20px auto;
  display: flex; justify-content: space-between; align-items: center;
  padding: 16px; background: var(--header-bg);
  border-radius: 18px; box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}
.logo { font-size: 22px; font-weight: bold; color: var(--text-color); }
.header-actions { display: flex; gap: 12px; }
.action-circle {
  width: 42px; height: 42px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; cursor: pointer; background: white; border: 1.5px solid #2e7d32;
}
.btn {
  width: 100%; max-width: 320px; margin: 10px auto;
  padding: 14px; border: none; border-radius: 12px;
  font-size: 16px; color: white; display: block; text-align: center;
  text-decoration: none; font-weight: bold; cursor: pointer;
}
.weather-btn { background: #1565c0; }
.spray-btn { background: #00796b; }
.ai-btn { background: #2e7d32; }
.notify-btn { background: #ef6c00; }
.market-btn { background: #2e7d32; }
.calc-btn { background: linear-gradient(135deg,#2e7d32,#43a047); }
.schedule-btn { background: linear-gradient(135deg,#ef6c00,#fb8c00); }
.satbara-btn { background: linear-gradient(135deg,#004d40,#00695c); }
</style>
</head>

<body>
<div class="header">
  <div class="logo">ЁЯМ╛ Smart Sheti</div>
  <div class="header-actions">
    <div class="action-circle" onclick="location.href='kharch-diary.html'">ЁЯТ░</div>
    <div class="action-circle" onclick="location.href='setting.html'">тЪЩя╕П</div>
  </div>
</div>

<button class="btn weather-btn" onclick="location.href='weather.html'">ЁЯМж рдЖрдЬрдЪрдВ рд╣рд╡рд╛рдорд╛рди</button>
<button class="btn spray-btn" onclick="alert('рд╣рд╡рд╛рдорд╛рди рддрдкрд╛рд╕рдд рдЖрд╣реЗ...')">ЁЯЪ┐ рдлрд╡рд╛рд░рдгреА рд╕рд▓реНрд▓рд╛</button>
<button class="btn ai-btn" onclick="location.href='ai.html'">ЁЯдЦ AI рд╕рд▓реНрд▓рд╛</button>
<button class="btn ai-btn" onclick="location.href='disease.html'">ЁЯУ╕ рд░реЛрдЧ рдУрд│рдЦ</button>
<button class="btn weather-btn" onclick="location.href='community.html'">ЁЯдЭ рдЧрд╛рд╡ рдЪрд░реНрдЪрд╛</button>

<button onclick="location.href='farmer-card.html'" style="width:100%; max-width:320px; margin:10px auto; padding:14px; border:none; border-radius:12px; font-size:16px; font-weight:bold; background:#FFD700; color:#000; display:block; box-shadow:0 4px 10px rgba(0,0,0,0.2); cursor:pointer;">
    ЁЯкк рд╢реЗрддрдХрд░реА рдХрд╛рд░реНрдб рддрдпрд╛рд░ рдХрд░рд╛
</button>
  
<button class="btn ai-btn" onclick="location.href='crop-calendar.html'">ЁЯМ▒ рдкреАрдХ рд╡реЗрд│рд╛рдкрддреНрд░рдХ</button>
<button class="btn notify-btn" onclick="location.href='news.html'">ЁЯУ░ рд╢реЗрддреА рдмрд╛рддрдореНрдпрд╛</button>
<button class="btn market-btn" onclick="window.open('https://www.krushikranti.com/bajarbhav','_blank')">ЁЯУИ рдЖрдЬрдЪреЗ рдмрд╛рдЬрд╛рд░рднрд╛рд╡</button>
<button class="btn calc-btn" onclick="location.href='calculator.html'">ЁЯзк рдЦрдд рдХреЕрд▓реНрдХреНрдпреБрд▓реЗрдЯрд░</button>
<button class="btn schedule-btn" onclick="location.href='spray-schedule.html'">ЁЯЪЬ рдлрд╡рд╛рд░рдгреА рд╡реЗрд│рд╛рдкрддреНрд░рдХ</button>
<button class="btn satbara-btn" onclick="window.open('https://digitalsatbara.mahabhumi.gov.in/','_blank')">ЁЯУД рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд╛рддрдмрд╛рд░рд╛ / реордЕ</button>
<button class="btn" onclick="window.open('https://pmfby.gov.in/', '_blank')" style="background:#607d8b;">ЁЯУС рдкреАрдХ рд╡рд┐рдорд╛ рд╕реНрдЯреЗрдЯрд╕</button>
<button class="btn" onclick="window.open('https://pmkisan.gov.in/BeneficiaryStatus_New.aspx', '_blank')" style="background:#546e7a;">ЁЯТ╕ PM-Kisan рд╣рдкреНрддрд╛ рдЪреЗрдХ</button>

<div id="updateModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; justify-content:center; align-items:center;">
    <div style="background:white; width:85%; max-width:320px; padding:25px; border-radius:20px; text-align:center; box-shadow: 0 10px 25px rgba(0,0,0,0.3);">
        <h3 style="margin-top:0; color:#2e7d32; font-size:22px;">рдирд╡реАрди рдЕрдкрдбреЗрдЯ! ЁЯЪА</h3>
        <p style="color:#555; font-size:15px; line-height:1.5;">рдЖрдореНрд╣реА ре▓рдкрдордзреНрдпреЗ рдХрд╛рд╣реА рд╕реБрдзрд╛рд░рдгрд╛ рдХреЗрд▓реНрдпрд╛ рдЖрд╣реЗрдд.</p>
        <button onclick="closeUpdatePopup()" style="width:100%; padding:14px; background:#2e7d32; color:white; border:none; border-radius:10px; font-weight:bold; font-size:16px; cursor:pointer;">рдЖрддрд╛ рд╡рд╛рдкрд░реВрди рдкрд╣рд╛</button>
    </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA1M7dJ9KFVe1GAGWPPqLuAT7BEuIKsZkM",
    authDomain: "smart-sheti-6512e.firebaseapp.com",
    projectId: "smart-sheti-6512e",
    storageBucket: "smart-sheti-6512e.firebasestorage.app",
    messagingSenderId: "1086459599128",
    appId: "1:1086459599128:web:03a34ed9ea2b95b1ebe66d"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.replace("index.html");
    }
  });
</script>

<script>
    async function checkAutoUpdate() {
        try {
            const response = await fetch(window.location.href, { method: 'HEAD', cache: 'no-store' });
            const lastModifiedOnServer = response.headers.get('Last-Modified');
            const lastSeenUpdate = localStorage.getItem("last_seen_update");
            if (lastModifiedOnServer && lastSeenUpdate && lastSeenUpdate !== lastModifiedOnServer) {
                document.getElementById("updateModal").style.display = "flex";
            }
            if(!lastSeenUpdate) {
                localStorage.setItem("last_seen_update", lastModifiedOnServer);
            }
            window.closeUpdatePopup = function() {
                localStorage.setItem("last_seen_update", lastModifiedOnServer);
                document.getElementById("updateModal").style.display = "none";
                location.reload(true);
            };
        } catch (error) { console.log("Update check failed"); }
    }
    window.addEventListener('load', checkAutoUpdate);
</script>
</body>
</html>
