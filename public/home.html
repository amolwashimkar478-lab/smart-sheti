<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Sheti - Home</title>

<script>
  // рд▓реЙрдЧрд┐рди рдлреНрд▓реЕрд╢ рдкреВрд░реНрдгрдкрдгреЗ рдерд╛рдВрдмрд╡рдгреНрдпрд╛рд╕рд╛рдареА
  if (!sessionStorage.getItem("isLoggedIn")) {
      document.documentElement.style.display = 'none';
      window.location.replace("index.html");
  }

  // рдЗрддрд┐рд╣рд╛рд╕рд╛рдордзреНрдпреЗ рд▓реЙрдЧрд┐рди рдкреЗрдЬ рди рдареЗрд╡рддрд╛ рдереЗрдЯ рд╣реЛрдо рдкреЗрдЬрдЪ рдареЗрд╡рдгреЗ
  if (window.history.replaceState) {
      window.history.replaceState(null, null, window.location.href);
  }

  // Double Press Exit рд▓реЙрдЬрд┐рдХрд╕рд╛рдареА рдЗрддрд┐рд╣рд╛рд╕ рддрдпрд╛рд░ рдХрд░рдгреЗ
  window.history.pushState(null, null, window.location.href);
</script>

<script>
if (typeof window !== "undefined" && "serviceWorker" in navigator) {
  var s=document.createElement("script");
  s.src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js";
  s.defer=true;
  document.head.appendChild(s);

  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId:"fdb7e40a-dc5c-4620-85d7-d99e5db6eb91",
      notifyButton:{enable:false},
      allowLocalhostAsSecureOrigin:true
    });
  });
}
</script>

<style>
:root { --bg:#e8f5e9; --head:#fff; --green:#2e7d32; --gold:#D4AF37; }
body{font-family:'Segoe UI';background:var(--bg);margin:0;padding:20px;}
.header{max-width:400px;margin:auto  auto 20px;display:flex;justify-content:space-between;align-items:center;
background:var(--head);padding:16px;border-radius:18px;box-shadow:0 6px 16px rgba(0,0,0,.15);}
.logo{font-size:22px;font-weight:bold;color:var(--green);}
.header-actions{display:flex;gap:12px;}
.action-circle{width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;
font-size:20px;background:#fff;border:1.5px solid var(--green);cursor:pointer;}
.btn{width:100%;max-width:320px;margin:10px auto;padding:14px;border:none;border-radius:12px;
font-size:16px;font-weight:bold;color:#fff;display:block;cursor:pointer;}
.weather-btn{background:#1565c0;}
.spray-btn{background:#00796b;}
.ai-btn{background:#2e7d32;}
.notify-btn{background:#ef6c00;}
.market-btn{background:#2e7d32;}
.calc-btn{background:linear-gradient(135deg,#2e7d32,#43a047);}
.schedule-btn{background:linear-gradient(135deg,#ef6c00,#fb8c00);}
.satbara-btn{background:linear-gradient(135deg,#004d40,#00695c);}

/* --- рдирд╡реАрди: Exit UI Styles --- */
#toastMessage {
    position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%);
    background: #333; color: white; padding: 10px 30px; border-radius: 50px;
    font-size: 16px; display: none; z-index: 10000; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
#fullExitScreen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--green); color: white; display: none;
    flex-direction: column; align-items: center; justify-content: center;
    z-index: 10001; text-align: center;
}
.exit-emoji { font-size: 80px; margin-bottom: 20px; }
.exit-text { font-size: 22px; font-weight: bold; padding: 0 20px; line-height: 1.5; }
</style>
</head>

<body>

<div id="toastMessage">Exit тЬЕ</div>
<div id="fullExitScreen">
    <div class="exit-emoji">ЁЯЩП</div>
    <div class="exit-text">рд╕реНрдорд╛рд░реНрдЯ рд╢реЗрддреА рд╡рд╛рдкрд░рд▓реНрдпрд╛рдмрджреНрджрд▓ <br> рдзрдиреНрдпрд╡рд╛рдж!</div>
    <div style="margin-top: 40px; color: var(--gold); font-weight: bold; letter-spacing: 2px;">ЁЯМ▒ SMART SHETI</div>
</div>

<div class="header">
  <div class="logo">ЁЯМ╛ Smart Sheti</div>
  <div class="header-actions">
    <div class="action-circle" onclick="location.href='kharch-diary.html'">ЁЯТ░</div>
    <div class="action-circle" onclick="location.href='setting.html'">тЪЩя╕П</div>
  </div>
</div>

<button class="btn weather-btn" onclick="location.href='weather.html'">ЁЯМж рдЖрдЬрдЪрдВ рд╣рд╡рд╛рдорд╛рди</button>
<button class="btn spray-btn" onclick="alert('рд╣рд╡рд╛рдорд╛рди рддрдкрд╛рд╕рдд рдЖрд╣реЗ...')">ЁЯЪ┐ рдлрд╡рд╛рд░рдгреА рд╕рд▓реНрд▓рд╛</button>
<button class="btn ai-btn" onclick="location.href='ai.html'">ЁЯдЦ AI рд╕рд▓реНрд▓рд╛</button>
<button class="btn ai-btn" onclick="location.href='disease.html'">ЁЯУ╕ рд░реЛрдЧ рдУрд│рдЦ</button>
<button class="btn weather-btn" onclick="location.href='community.html'">ЁЯдЭ рдЧрд╛рд╡ рдЪрд░реНрдЪрд╛</button>

<button class="btn" style="background:#FFD700;color:#000"
 onclick="location.href='farmer-card.html'">ЁЯкк рд╢реЗрддрдХрд░реА рдХрд╛рд░реНрдб рддрдпрд╛рд░ рдХрд░рд╛</button>

<button class="btn ai-btn" onclick="location.href='crop-calendar.html'">ЁЯМ▒ рдкреАрдХ рд╡реЗрд│рд╛рдкрддреНрд░рдХ</button>
<button class="btn notify-btn" onclick="location.href='news.html'">ЁЯУ░ рд╢реЗрддреА рдмрд╛рддрдореНрдпрд╛</button>

<button class="btn market-btn"
 onclick="location.href='https://www.krushikranti.com/bajarbhav'">
ЁЯУИ рдЖрдЬрдЪреЗ рдмрд╛рдЬрд╛рд░рднрд╛рд╡</button>

<button class="btn calc-btn" onclick="location.href='calculator.html'">ЁЯзк рдЦрдд рдХреЕрд▓реНрдХреНрдпреБрд▓реЗрдЯрд░</button>
<button class="btn schedule-btn" onclick="location.href='spray-schedule.html'">ЁЯЪЬ рдлрд╡рд╛рд░рдгреА рд╡реЗрд│рд╛рдкрддреНрд░рдХ</button>

<button class="btn" style="background:#2e7d32; color:white; padding:15px 25px; border:none; border-radius:12px; font-size:18px; font-weight:bold; cursor:pointer; width:100%; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" 
 onclick="location.href='myfarm.html'">
    ЁЯМ╛ рдорд╛рдЭрдВ рд╢реЗрдд (рд╕реНрдорд╛рд░реНрдЯ рд╕рд▓реНрд▓рд╛)
</button>
  
  
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth,onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const app=initializeApp({
 apiKey:"AIzaSyA1M7dJ9KFVe1GAGWPPqLuAT7BEuIKsZkM",
 authDomain:"smart-sheti-6512e.firebaseapp.com",
 projectId:"smart-sheti-6512e",
 storageBucket:"smart-sheti-6512e.firebasestorage.app",
 messagingSenderId:"1086459599128",
 appId:"1:1086459599128:web:03a34ed9ea2b95b1ebe66d"
});

const auth=getAuth(app);
let checked=false;
onAuthStateChanged(auth,u=>{
 if(!checked){
  checked=true;
  if(!u) location.replace("index.html");
 }
});
</script>

<script>
  let backPressTime = 0;
  window.onpopstate = function() {
      const currentTime = new Date().getTime();
      
      // рдЬрд░ реи рд╕реЗрдХрдВрджрд╛рдВрдЪреНрдпрд╛ рдЖрдд рдкреБрдиреНрд╣рд╛ рдмрдЯрди рджрд╛рдмрд▓реЗ (рджреБрд╕рд░рд╛ рдкреНрд░реЗрд╕)
      if (currentTime - backPressTime < 2000) {
          document.getElementById("toastMessage").style.display = "none";
          document.getElementById("fullExitScreen").style.display = "flex";
          
          // реи.рел рд╕реЗрдХрдВрдж рдореЗрд╕реЗрдЬ рджрд╛рдЦрд╡реВрди рдордЧ рдмрд╛рд╣реЗрд░ рдкрдбрдгреЗ
          setTimeout(() => {
              // ре▓рдк рдмрдВрдж рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдореВрд│ рдЗрддрд┐рд╣рд╛рд╕ рд╡рд╛рдкрд░рдгреЗ
              window.history.go(-2); 
          }, 2500);
      } else {
          // рдкрд╣рд┐рд▓рд╛ рдкреНрд░реЗрд╕: 'Exit тЬЕ' рдкрдЯреНрдЯреА рджрд╛рдЦрд╡рд╛
          const toast = document.getElementById("toastMessage");
          toast.style.display = "block";
          
          setTimeout(() => {
              toast.style.display = "none";
          }, 2000);
          
          backPressTime = currentTime;
          // рдкреБрдиреНрд╣рд╛ рдЗрддрд┐рд╣рд╛рд╕ ре▓рдб рдХрд░рд╛ рдЬреЗрдгреЗрдХрд░реВрди ре▓рдк рд▓рдЧреЗрдЪ рдмрдВрдж рд╣реЛрдгрд╛рд░ рдирд╛рд╣реА
          window.history.pushState(null, null, window.location.href);
      }
  };
</script>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('Home: Service Worker Registered!'))
        .catch(err => console.log('Home: Service Worker Failed!', err));
    });
  }
</script>

</body>
</html>
